<div class="bg-white">
  <div class="mx-auto max-w-7xl overflow-hidden sm:px-6 lg:px-8">
    <h2 class="sr-only">Products</h2>

    <!-- Product Grid -->
    <div class="-mx-px grid grid-cols-2 border-l border-gray-200 sm:mx-0 md:grid-cols-3 lg:grid-cols-4">
      <% @products.each do |product| %>
        <div class="group relative border-r border-b border-gray-200 p-4 sm:p-6">
          <!-- Placeholder image (replace with product.image if available) -->

          <% if product.image.attached? %>
            <%= image_tag product.image.variant(resize_to_limit: [400, 400]), alt: product.name, class: "aspect-square rounded-lg bg-gray-200 object-cover group-hover:opacity-75" %>
          <% else %>
            <!-- Fallback image if no file is attached -->
            <%= image_tag "https://tailwindui.com/plus/img/ecommerce-images/category-page-05-image-card-01.jpg", alt: product.name, class: "aspect-square rounded-lg bg-gray-200 object-cover group-hover:opacity-75" %>
          <% end %>


          <div class="pt-10 pb-4 text-center">
            <h3 class="text-sm font-medium text-gray-900">
              <%= link_to product_path(product) do %>
                <span aria-hidden="true" class="absolute inset-0"></span>
                <%= product.name %>
              <% end %>
            </h3>
          </div>

          <p class="mt-4 text-base font-medium text-gray-900">
          $<%= sprintf('%.2f', product.price) %>
          </p>

          <!-- Stock level display with conditional coloring -->
          <p class="mt-2 text-sm font-medium <%= product.quantity.zero? ? 'text-red-600' : product.quantity <= 10 ? 'text-yellow-600' : 'text-green-600' %>">
          <%= product.quantity.zero? ? 'Out of Stock' : "#{product.quantity} in stock" %>
          </p>
        </div>
      <% end %>
    </div>
  </div>
</div>



<div class="group relative bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden hover:shadow-lg transition-all duration-300">
  <div class="aspect-square relative">
    <% if product.image.attached? %>
      <%= image_tag product.image.variant(resize_to_limit: [400, 400]), 
        alt: product.name, 
        class: "w-full h-full object-cover transition-opacity group-hover:opacity-75" %>
    <% else %>
      <%= image_tag "https://tailwindui.com/plus/img/ecommerce-images/category-page-05-image-card-01.jpg", 
        alt: product.name, 
        class: "w-full h-full object-cover transition-opacity group-hover:opacity-75" %>
    <% end %>
  </div>
  <div class="p-4">
    <div class="flex justify-between items-center">
      <h3 class="text-sm font-semibold text-gray-900">
        <%= link_to product_path(product), class: "hover:text-indigo-600", data: { turbo_frame: "_top" } do %>
          <span aria-hidden="true" class="absolute inset-0"></span>
          <%= truncate(product.name, length: 20) %>
        <% end %>
      </h3>
      <p class="text-base font-medium text-gray-900">
        $<%= sprintf('%.2f', product.price) %>
      </p>
    </div>
    <div class="mt-2 flex items-center justify-between">
      <p class="text-sm font-medium <%= 
        product.quantity.zero? ? 'text-red-600' : 
        product.quantity <= 10 ? 'text-yellow-600' : 'text-green-600' %>">
        <%= product.quantity.zero? ? 'Out of Stock' : "#{product.quantity} in stock" %>
      </p>
    </div>
  </div>
</div>
